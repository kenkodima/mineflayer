const mineflayer = require('mineflayer');

// Replace 'localhost' with the IP address of your Minecraft server
const bot = mineflayer.createBot({ host: 'localhost', port: 25565 });

bot.on('chat', (username, message) => {
  if (username === bot.username) return;
  // Replace 'diamond_ore' with the block name you want to mine
  if (message === 'mine diamond_ore') {
    bot.chat('I am now mining diamond ore.');
    startMining();
  }
});

function startMining() {
  // Replace 'diamond_ore' with the block name you want to mine
  const target = bot.findBlock({
    matching: 56, // 56 is the block ID for diamond ore
  });
  if (target) {
    bot.navigate.to(target.position, {
      endRadius: 2,
    });
    bot.on('arrival', () => {
      bot.mine(target, (err) => {
        if (err) {
          bot.chat("I can't mine that block.");
        } else {
          bot.chat('I mined a diamond ore block!');
          // Call the startMining function again to continue the loop
          startMining();
        }
      });
    });
  } else {
    bot.chat("I can't find any diamond ore blocks.");
  }
}
